## *作用域*

> ### 变量的作用域
>
> > 变量的作用域就两种：全局变量和局部变量
>
> ### 作用域链
>
> > 一句话表示就是根据在内部函数可以访问外部函数变量的这种机制，用链式查找决定哪些数据能被内部函数访问，这就是作用域链，就是定义在函数内部的变量可以访问一下函数外部的变量
> >
> > > 当某个函数第一次被调用时，就会创建一个执行环境(execution context)以及相应的作用域链，并把作用域链赋值给一个特殊的内部属性([scope])。然后使用this，arguments(arguments在全局环境中不存在)和其他命名参数的值来初始化函数的活动对象(activation object)。当前执行环境的变量对象始终在作用域链的第0位。

###  [链接地址](https://segmentfault.com/a/1190000015782315)

## *闭包*

> **当一个函数内部的变量被其内部的函数引用时，就形成了一个闭包**
>
> **闭包就是能够读取其他函数内部变量的函数**
>
> 闭包的应用
>
> ```js
> function A() {
>  var count = 0;
>  function B() {
>     count ++;
>     console.log(count);
>  }
>  return B;
> }
> var C = A();
> C();// 1
> C();// 2
> C();// 3
> // 在 Javascript 中，如果一个对象不再被引用，那么这个对象就会被 GC 回收，否则这个对象一直会保存在内存中 也就是说，A 不会被 GC 回收，会一直保存在内存中。为了证明我们的推理，上面的例子稍作改进：
> 
> // count 是函数A 中的一个变量，它的值在函数B 中被改变，函数 B 每执行一次，count 的值就在原来的基础上累加 1 。因此，函数A中的 count 变量会一直保存在内存中。
> ```
>
> 闭包的优点
>
> > + 进行变量持久化。
> > + 使函数对象内有更好的封装性，内部数据私有化 
>
> 闭包的缺点
>
> > 一直存在内存中，大量使用闭包可能会造成性能问题。  
>
> > ### [链接地址]([https://cnblogs.com/onepixel/p/5062456.html](https://www.cnblogs.com/onepixel/p/5062456.html))

## *闭包的验证*

> ```js
> var couAdd = function() {
>   var counter = 1;
>   console.log(counter)
>   return function() {
>     return counter++
>   }
> }
> 
> couAdd()()  // 这样会打印1
> couAdd()()	// 这样会打印1
> 
> var s = couAdd()
> s() // 1
> s() // 2
> ```
>
> 当执行两边couAdd()()的时候每次执行都会堆counter执行赋值=1的操作，所以上边都是打印1
>
> 而下边把一个变量赋值给couAdd的时候打印1遍1，后来再执行s()的操作，闭包中引用的变量i不会被销毁，所以能够一直++

##  *js的垃圾回收机制*

> ### *标记清除*
>
> 1. 这是javascript中最常用的垃圾回收方式。当变量进入执行环境时，就标记这个变量为“进入环境”。从逻辑上讲，永远不能释放进入环境的变量所占用的内存，因为只要执行流进入相应的环境，就可能会用到他们。当变量离开环境时，则将其标记为“离开环境”。
>    垃圾收集器在运行的时候会给存储在内存中的所有变量都加上标记。然后，它会去掉环境中的变量以及被环境中的变量引用的标记。而在此之后再被加上标记的变量将被视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了。最后。垃圾收集器完成内存清除工作，销毁那些带标记的值，并回收他们所占用的内存空间。
>
> ### *引用计数*
>
> 2. 另一种不太常见的垃圾回收策略是引用计数。引用计数的含义是跟踪记录每个值被引用的次数。当声明了一个变量并将一个引用类型赋值给该变量时，则这个值的引用次数就是1。相反，如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数就减1。当这个引用次数变成0时，则说明没有办法再访问这个值了，因而就可以将其所占的内存空间给收回来。这样，垃圾收集器下次再运行时，它就会释放那些引用次数为0的值所占的内存
>
> ### *减少垃圾回收*
>
> > ### [链接地址](https://www.cnblogs.com/zhwl/p/4664604.html)