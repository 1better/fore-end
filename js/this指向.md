## *this指向*

+ 普通函数   this指向window
+ 对象函数   哪个函数调用this就指向哪里
+ 构造函数调用   this指向实例对象（new实现）
+ 改变this指向     aplly，call，bind
+ 箭头函数            this继承外面的环境。

## *延伸 为什么this指向会不一样*

还是和堆栈的概念有关系，函数是引用类型，不管你是在全局环境创建函数还是在对象中创建函数时，它都创建了在堆内存中创建了函数的值，然后指向了这一段堆地址

```js
var s = obj.fn
// 这样创建了一个变量，它的指针和obj.fn的指针指向相同,都是相同的一段堆内存，所以可以s()
```

因为函数调用有这种特性，所以需要一个this来判断它的执行环境，执行环境改变this就随着改变

```js
s()
// 相当于 widow.s() -> widow.fn()
// 执行环境变了，变成了window对象，所以this就指向了window
obj.fn()

// 执行环境变了，变成了obj对象，所以this就指向了obj
```



